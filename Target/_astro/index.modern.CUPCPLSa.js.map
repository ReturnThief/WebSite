{"version":3,"file":"index.modern.CUPCPLSa.js","sources":["../../node_modules/@swup/preload-plugin/dist/index.modern.js"],"sourcesContent":["import e from\"@swup/plugin\";import{Location as t,getCurrentUrl as s}from\"swup\";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},r.apply(this,arguments)}function o(){return window.matchMedia(\"(hover: hover)\").matches}function i(e){return!!e&&(e instanceof HTMLAnchorElement||e instanceof SVGAElement)}const n=window.requestIdleCallback||(e=>setTimeout(e,1)),a=[\"preloadVisibleLinks\"];class l extends e{constructor(e={}){var s;super(),s=this,this.name=\"SwupPreloadPlugin\",this.requires={swup:\">=4.5\"},this.defaults={throttle:5,preloadInitialPage:!0,preloadHoveredLinks:!0,preloadVisibleLinks:{enabled:!1,threshold:.2,delay:500,containers:[\"body\"],ignore:()=>!1}},this.options=void 0,this.queue=void 0,this.preloadObserver=void 0,this.preloadPromises=new Map,this.mouseEnterDelegate=void 0,this.touchStartDelegate=void 0,this.focusDelegate=void 0,this.onPageLoad=(e,t,s)=>{const{url:r}=e.to;return r&&this.preloadPromises.has(r)?this.preloadPromises.get(r):s(e,t)},this.onMouseEnter=async function(e){if(e.target!==e.delegateTarget)return;if(!o())return;const r=e.delegateTarget;if(!i(r))return;const{url:n,hash:a}=t.fromElement(r),l=s.swup.createVisit({to:n,hash:a,el:r,event:e});s.swup.hooks.callSync(\"link:hover\",l,{el:r,event:e}),s.preload(r,{priority:!0})},this.onTouchStart=e=>{if(o())return;const t=e.delegateTarget;i(t)&&this.preload(t,{priority:!0})},this.onFocus=e=>{const t=e.delegateTarget;i(t)&&this.preload(t,{priority:!0})};const{preloadVisibleLinks:n}=e,l=function(e,t){if(null==e)return{};var s,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(s=i[r])>=0||(o[s]=e[s]);return o}(e,a);this.options=r({},this.defaults,l),\"object\"==typeof n?this.options.preloadVisibleLinks=r({},this.options.preloadVisibleLinks,{enabled:!0},n):this.options.preloadVisibleLinks.enabled=Boolean(n),this.preload=this.preload.bind(this),this.queue=function(e=1){const t=[],s=[];let r=0,o=0;function i(){o<e&&r>0&&((s.shift()||t.shift()||(()=>{}))(),r--,o++)}return{add:function(e,o=!1){if(e.__queued){if(!o)return;{const s=t.indexOf(e);if(s>=0){const e=t.splice(s,1);r-=e.length}}}e.__queued=!0,(o?s:t).push(e),r++,r<=1&&i()},next:function(){o--,i()}}}(this.options.throttle)}mount(){const e=this.swup;e.options.cache?(e.hooks.create(\"page:preload\"),e.hooks.create(\"link:hover\"),e.preload=this.preload,e.preloadLinks=this.preloadLinks,this.replace(\"page:load\",this.onPageLoad),this.preloadLinks(),this.on(\"page:view\",()=>this.preloadLinks()),this.options.preloadVisibleLinks.enabled&&(this.preloadVisibleLinks(),this.on(\"page:view\",()=>this.preloadVisibleLinks())),this.options.preloadHoveredLinks&&this.preloadLinksOnAttention(),this.options.preloadInitialPage&&this.preload(s())):console.warn(\"SwupPreloadPlugin: swup cache needs to be enabled for preloading\")}unmount(){var e,t,s;this.swup.preload=void 0,this.swup.preloadLinks=void 0,this.preloadPromises.clear(),null==(e=this.mouseEnterDelegate)||e.destroy(),null==(t=this.touchStartDelegate)||t.destroy(),null==(s=this.focusDelegate)||s.destroy(),this.stopPreloadingVisibleLinks()}async preload(e,s={}){var r;let o,n;const a=null!=(r=s.priority)&&r;if(Array.isArray(e))return Promise.all(e.map(e=>this.preload(e)));if(i(e))n=e,({href:o}=t.fromElement(e));else{if(\"string\"!=typeof e)return;o=e}if(!o)return;if(this.preloadPromises.has(o))return this.preloadPromises.get(o);if(!this.shouldPreload(o,{el:n}))return;const l=new Promise(e=>{this.queue.add(()=>{this.performPreload(o).catch(()=>{}).then(t=>e(t)).finally(()=>{this.queue.next(),this.preloadPromises.delete(o)})},a)});return this.preloadPromises.set(o,l),l}preloadLinks(){n(()=>{Array.from(document.querySelectorAll(\"a[data-swup-preload], [data-swup-preload-all] a\")).forEach(e=>this.preload(e))})}preloadLinksOnAttention(){const{swup:e}=this,{linkSelector:t}=e.options,s={passive:!0,capture:!0};this.mouseEnterDelegate=e.delegateEvent(t,\"mouseenter\",this.onMouseEnter,s),this.touchStartDelegate=e.delegateEvent(t,\"touchstart\",this.onTouchStart,s),this.focusDelegate=e.delegateEvent(t,\"focus\",this.onFocus,s)}preloadVisibleLinks(){if(this.preloadObserver)return void this.preloadObserver.update();const{threshold:e,delay:s,containers:r}=this.options.preloadVisibleLinks;this.preloadObserver=function({threshold:e,delay:s,containers:r,callback:o,filter:i}){const a=new Map,l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?h(e.target):d(e.target)})},{threshold:e}),h=e=>{var r;const{href:i}=t.fromElement(e),n=null!=(r=a.get(i))?r:new Set;a.set(i,n),n.add(e),setTimeout(()=>{const t=a.get(i);null!=t&&t.size&&(o(e),l.unobserve(e),t.delete(e))},s)},d=e=>{var s;const{href:r}=t.fromElement(e);null==(s=a.get(r))||s.delete(e)},u=()=>{n(()=>{const e=r.map(e=>`${e} a[*|href]`).join(\", \");Array.from(document.querySelectorAll(e)).filter(e=>i(e)).forEach(e=>l.observe(e))})};return{start:()=>u(),stop:()=>l.disconnect(),update:()=>(a.clear(),u())}}({threshold:e,delay:s,containers:r,callback:e=>this.preload(e),filter:e=>{if(this.options.preloadVisibleLinks.ignore(e))return!1;if(!e.matches(this.swup.options.linkSelector))return!1;const{href:s}=t.fromElement(e);return this.shouldPreload(s,{el:e})}}),this.preloadObserver.start()}stopPreloadingVisibleLinks(){this.preloadObserver&&this.preloadObserver.stop()}shouldPreload(e,{el:r}={}){const{url:o,href:i}=t.fromUrl(e);return!(!function(){if(navigator.connection){var e;if(navigator.connection.saveData)return!1;if(null!=(e=navigator.connection.effectiveType)&&e.endsWith(\"2g\"))return!1}return!0}()||this.swup.cache.has(o)||this.preloadPromises.has(o)||this.swup.shouldIgnoreVisit(i,{el:r})||r&&this.swup.resolveUrl(o)===this.swup.resolveUrl(s()))}async performPreload(e){var s=this;const{url:r}=t.fromUrl(e),o=this.swup.createVisit({to:r}),i=await this.swup.hooks.call(\"page:preload\",o,{url:r},async function(t,r){return r.page=await s.swup.fetchPage(e,{visit:t}),r.page});return i}}export{l as default};\n//# sourceMappingURL=index.modern.js.map\n"],"names":["r","e","t","s","o","i","n","a","l","h","d","u"],"mappings":"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","x_google_ignoreList":[0]}